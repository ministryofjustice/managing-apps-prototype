{% extends "layouts/dps.html" %}

{% set pageName="Log details" %}
{% set version="latest" %}
{% set phasebanner="yes" %}
{% set bodyClasses = 'dps staff-v1' %}
{% set homeurl="/staff/app-type-lookup-latest/" %}


{% block content %}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-full">
    <div class="govuk-width-container">

      <a href="javascript:history.go(-1)" class="govuk-back-link">Back</a>

      <span class="govuk-caption-xl">{{ data['app_type'] }}</span>
      <h1 class="govuk-heading-xl">Log details</h1>

      <div class="govuk-width-container">

        <div class="govuk-grid-row">
          <div class="govuk-grid-column-one-half">


            <form class="form" action="/staff/app-type-lookup-latest/applications/log/check-details">

              {% from "govuk/components/character-count/macro.njk" import govukCharacterCount %}

              {{ govukCharacterCount({
                name: "pin_07_detail",
                id: "pin_07_detail",
                maxlength: 1000,
                threshold: 75,
                rows: "8",
                value:  data['pin_07_detail'] ,
                label: {
                  text: "Details",
                  classes: "govuk-label--s"
                },
                hint: {
                  text: "Add a brief summary"
                }
              }) }}      

              <div class="govuk-form-group">
                <label class="govuk-label govuk-label--s" for="app_dept">
                  Department
                </label>
                <div id="app_dept-hint" class="govuk-hint">
                  Send this application to:
                </div>
                <select class="govuk-select" id="app_dept" name="pin_07_app_dept">
                  <option value="" disabled selected>Select a department</option>
                  {% for dept in data['departments'] %}
                  <option value="{{ dept.department_name }}">{{ dept.department_name }}</option>
                  {% endfor %}
                </select>
              </div>


            <div class="moj-button-action">
              <button type="submit" class="govuk-button" data-module="govuk-button">
                Continue
              </button>
            </div>

            </form>

          </div>
        </div>
      </div>
    </div>
  </div>

</div> <!-- end main content  -->



{% endblock %}

{% block pageScripts %}
<script>
  var selectEl = document.querySelector('#pin_07_title')
  accessibleAutocomplete.enhanceSelectElement({
    autoselect: true,
    confirmOnBlur: true,
    defaultValue: "",
    minLength: 1,
    selectElement: selectEl,
    displayMenu: 'overlay',
    showNoOptionsFound: false,
    name: 'pin_07_title'
  })
</script>

{% endblock %}